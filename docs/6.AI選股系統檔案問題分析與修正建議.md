# AIé¸è‚¡ç³»çµ±æª”æ¡ˆå•é¡Œåˆ†æèˆ‡ä¿®æ­£å»ºè­°

## ğŸš¨ ç™¼ç¾çš„å•é¡Œ

### 1. Docker Compose é…ç½®å•é¡Œ

#### å•é¡Œ Aï¼šå‰ç«¯ç«¯å£æ˜ å°„éŒ¯èª¤
```yaml
# ç›®å‰é…ç½®ï¼ˆéŒ¯èª¤ï¼‰
frontend:
  ports:
    - "3000:80"  # âŒ éŒ¯èª¤ï¼šå‰ç«¯å®¹å™¨å…§ä½¿ç”¨3000ç«¯å£ï¼Œä¸æ˜¯80
```

#### å•é¡Œ Bï¼šè³‡æ–™æ”¶é›†å™¨Dockerfileè·¯å¾‘éŒ¯èª¤
```yaml
# ç›®å‰é…ç½®ï¼ˆéŒ¯èª¤ï¼‰
data_collector:
  build:
    context: ./backend  # âŒ éŒ¯èª¤ï¼šæ‡‰è©²ä½¿ç”¨data_collectorç›®éŒ„
    dockerfile: Dockerfile
```

#### å•é¡Œ Cï¼šNginxé…ç½®æª”æ¡ˆè·¯å¾‘éŒ¯èª¤
```yaml
# ç›®å‰é…ç½®ï¼ˆéŒ¯èª¤ï¼‰
nginx:
  volumes:
    - ./deployment/nginx.conf:/etc/nginx/nginx.conf  # âŒ è·¯å¾‘ä¸å°
```

#### å•é¡Œ Dï¼šç¼ºå°‘ç’°å¢ƒè®Šæ•¸ä¸€è‡´æ€§
- Docker Composeä¸­çš„ç’°å¢ƒè®Šæ•¸åç¨±èˆ‡config.pyä¸å®Œå…¨åŒ¹é…

### 2. Main.py é…ç½®å•é¡Œ

#### å•é¡Œ Aï¼šCelery Beatèª¿åº¦å™¨é…ç½®éŒ¯èª¤
```python
# ç›®å‰é…ç½®ï¼ˆéŒ¯èª¤ï¼‰
command: celery -A celery_app beat --scheduler django_celery_beat.schedulers:DatabaseScheduler
```
âŒ ä½¿ç”¨äº†Djangoèª¿åº¦å™¨ï¼Œä½†é€™æ˜¯FastAPIå°ˆæ¡ˆ

#### å•é¡Œ Bï¼šç¼ºå°‘æ¨¡çµ„è·¯å¾‘
- æŸäº›importè·¯å¾‘å¯èƒ½ç„¡æ³•æ­£ç¢ºè§£æ

### 3. ç¼ºå¤±çš„é…ç½®æª”æ¡ˆ

1. **Celeryé…ç½®æª”æ¡ˆ** - `backend/celery_app.py`
2. **æ—¥èªŒé…ç½®** - `backend/app/utils/logging.py`
3. **è³‡æ–™åº«ç®¡ç†** - `backend/app/database.py` çš„å®Œæ•´ç‰ˆæœ¬
4. **APIè·¯ç”±æª”æ¡ˆ** - `backend/app/api/` ç›®éŒ„ä¸‹çš„è·¯ç”±æª”æ¡ˆ

## ğŸ”§ ä¿®æ­£æ–¹æ¡ˆ

### ä¿®æ­£ 1ï¼šæ›´æ–° Docker Compose é…ç½®

```yaml
# ä¿®æ­£å¾Œçš„ docker-compose.yml é—œéµéƒ¨åˆ†
services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"  # âœ… ä¿®æ­£ç«¯å£æ˜ å°„
    environment:
      - VITE_API_BASE_URL=http://localhost:8000

  data_collector:
    build:
      context: ./data_collector  # âœ… ä½¿ç”¨æ­£ç¢ºè·¯å¾‘
      dockerfile: Dockerfile
    volumes:
      - ./data_collector:/app
      - ./backend/app:/app/backend_app  # å…±äº«å¾Œç«¯ä»£ç¢¼

  nginx:
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf  # âœ… æ­£ç¢ºè·¯å¾‘

  celery_beat:
    command: celery -A celery_app beat --loglevel=info  # âœ… ç§»é™¤Djangoèª¿åº¦å™¨
```

### ä¿®æ­£ 2ï¼šéœ€è¦æ–°å¢çš„æª”æ¡ˆ

ä»¥ä¸‹æª”æ¡ˆæ˜¯ç³»çµ±æ­£å¸¸é‹ä½œå¿…é ˆçš„ï¼š

1. **`backend/celery_app.py`** - Celeryæ‡‰ç”¨é…ç½®
2. **`backend/app/database.py`** - è³‡æ–™åº«é€£æ¥ç®¡ç†
3. **`backend/app/utils/logging.py`** - æ—¥èªŒç³»çµ±
4. **`backend/app/api/stocks.py`** - è‚¡ç¥¨APIè·¯ç”±
5. **`backend/app/api/analysis.py`** - åˆ†æAPIè·¯ç”±
6. **`backend/app/api/recommendations.py`** - æ¨è–¦APIè·¯ç”±

### ä¿®æ­£ 3ï¼šç’°å¢ƒè®Šæ•¸çµ±ä¸€

```bash
# .env æª”æ¡ˆéœ€è¦æ·»åŠ çš„è®Šæ•¸
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/1
INFLUXDB_USER=admin
INFLUXDB_PASSWORD=influx_password
INFLUXDB_ORG=stock_org
INFLUXDB_BUCKET=stock_timeseries
INFLUXDB_TOKEN=your_influxdb_token
```

## ğŸ¯ å„ªå…ˆç´šä¿®æ­£é †åº

### ğŸ”¥ é«˜å„ªå…ˆç´šï¼ˆå¿…é ˆç«‹å³ä¿®æ­£ï¼‰
1. ä¿®æ­£Docker Composeç«¯å£æ˜ å°„
2. å»ºç«‹Celeryé…ç½®æª”æ¡ˆ
3. å»ºç«‹è³‡æ–™åº«é€£æ¥æª”æ¡ˆ
4. å»ºç«‹APIè·¯ç”±æª”æ¡ˆ

### ğŸ”¥ ä¸­å„ªå…ˆç´šï¼ˆå½±éŸ¿åŠŸèƒ½ï¼‰
1. ä¿®æ­£Nginxé…ç½®è·¯å¾‘
2. çµ±ä¸€ç’°å¢ƒè®Šæ•¸å‘½å
3. å»ºç«‹æ—¥èªŒç³»çµ±

### ğŸ”¥ ä½å„ªå…ˆç´šï¼ˆå„ªåŒ–é …ç›®ï¼‰
1. åŠ å¼·éŒ¯èª¤è™•ç†
2. æ·»åŠ æ›´å¤šç›£æ§æŒ‡æ¨™
3. å„ªåŒ–æ•ˆèƒ½è¨­å®š

## ğŸ’¡ å»ºè­°çš„ä¸‹ä¸€æ­¥

1. **æˆ‘å°‡ç‚ºæ‚¨æä¾›æ‰€æœ‰ç¼ºå¤±çš„æª”æ¡ˆ**
2. **ä¿®æ­£ç¾æœ‰æª”æ¡ˆçš„é…ç½®å•é¡Œ**
3. **æä¾›æ›´æ–°å¾Œçš„docker-compose.yml**
4. **å»ºç«‹å®Œæ•´çš„æ¸¬è©¦è…³æœ¬**

é€™æ¨£æ‚¨å°±èƒ½æ“æœ‰ä¸€å€‹å®Œå…¨å¯é‹ä½œçš„AIé¸è‚¡ç³»çµ±ï¼